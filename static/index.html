<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width">

<h1>AIチャット - demo</h1>
<form id=form><textarea id=q></textarea><br>
<input type=submit value="AIに質問する"> <button id=btncls>クリア</button></form>
<textarea id=ta>
</textarea>
<hr>
<a href=https://github.com/code4fukui/ai_chat/>src on GitHub</a> (<a href=talk.html>talk version</a>)<br>
<a href=https://openai.com/api/>OpenAI API</a><br>


<script type="module">
import { fetchJSON } from "https://js.sabae.cc/fetchJSON.js";

form.onsubmit = async (e) => {
  e.preventDefault();
  //const prompt = ta.value + "\nHuman: " + q.value;
  const prompt = q.value;
  ta.value = "考え中...";
  const res = await fetchJSON("/api", prompt);
  //ta.value = prompt + "\n\n" + res;
  ta.value = res.trim();
  //q.value = "";
};
btncls.onclick = () => q.value = "";
</script>

<style>
textarea {
  font-size: 16px;
  width: 90vw;
  height: 10em;
}
input[type=submit] {
  margin: .5em 0;
}
</style>
